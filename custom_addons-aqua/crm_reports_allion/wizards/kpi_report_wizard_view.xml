<odoo>
	<data>
		<record id="kpi_reports_wizard_form" model="ir.ui.view">
			<field name="name">kpi.reports.wizard.form</field>
			<field name="model">kpi.reports.wizard</field>
			<field name="arch" type="xml">
				<form>
					<field name="is_printed" nolabel="1" readonly="1" invisible="1"/>
					<group colspan="4" attrs="{'invisible': [('is_printed','=',True)]}">
						<group>
							<field name="report_type" required="True"/>
							<field name="user_id" attrs="{'required' : [('report_type', 'in' , ['projects_by_employee', 'calls_by_employee', 'visits_by_employee'])],
							'invisible' : [('report_type', 'not in', ['projects_by_employee', 'calls_by_employee', 'visits_by_employee'])]}"/>
							<field name="project_id" attrs="{'required' : ['|', ('report_type', 'not in' , ['project_status', 'projects_by_employee', 'quotation_status', 'loss_reason']),
							('employee_action_by', '=', 'crm')],
							'invisible' : ['|',('report_type', 'in', ['project_status', 'quotation_status', 'loss_reason', 'projects_by_employee']), ('employee_action_by', 'in', ['helpdesk'])]}"/>
						</group>
						<group>
							<field name="employee_action_by" attrs="{'required' : [('report_type', 'not in' , ['project_status', 'projects_by_employee', 'quotation_status', 'loss_reason'])],
							'invisible' : [('report_type', 'in', ['project_status','projects_by_employee', 'quotation_status', 'loss_reason'])]}"/>
							<field name="date_from" attrs="{'required' : [('report_type', 'not in' , ['project_status', 'projects_by_employee', 'quotation_status'], 'loss_reason')],
							'invisible' : [('report_type', 'in', ['project_status', 'quotation_status', 'loss_reason' ,'projects_by_employee'])]}"/>
							<field name="date_to" attrs="{'required' : [('report_type', 'not in' , ['project_status', 'projects_by_employee', 'quotation_status', 'loss_reason'])],
							'invisible' : [('report_type', 'in', ['project_status', 'projects_by_employee', 'quotation_status', 'loss_reason'])]}"/>
						</group>
					</group>
					<group attrs="{'invisible': [('is_printed','!=',True)]}" colspan="4">
						<field widget="binary" name="report_file" nolabel="1" filename="report_name" colspan="4"/>
						<field name="report_name" nolabel="1" readonly="1" invisible="1"/>
					</group>
					<footer>
						<button name="export_kpi_report" string="Export" type="object"
								class="oe_highlight" attrs="{'invisible': [('is_printed','=',True)]}"/>
						<button name="action_back" string="Back" class="btn btn-default"
								type='object' attrs="{'invisible': [('is_printed','!=',True)]}"/>
						<button string="Cancel" class="oe_link" special="cancel" />
					</footer>
				</form>
			</field>
		</record>
		<record id="action_kpi_reports_wizard_form" model="ir.actions.act_window">
			<field name="name">KPI Reports</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kpi.reports.wizard</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="kpi_reports_wizard_form"/>
			<field name="target">new</field>
		</record>

		<menuitem
				action="action_kpi_reports_wizard_form"
				id="menu_kpi_reports_wizard"
				parent="crm.crm_menu_report"
				sequence="25"
		/>
	</data>
</odoo>